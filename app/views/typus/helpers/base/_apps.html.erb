<ul>

  <% dashboard = 'active' if params[:controller].include?('dashboard') %>

  <li><%= link_to Typus::I18n.t("Dashboard"), typus_dashboard_path, :class => dashboard %></li>

  <% typus_user.applications.each do |application| %>

    <%
      apps = typus_user.application(application)
      klass = (@resource && apps.include?(@resource.model_name)) ? 'active' : nil
    %>

    <%
      url = { :controller => "/typus/#{apps.first.tableize}" }
      html_options = { :class => klass }
    %>

    <li><%= link_to Typus::I18n.t(application), url, html_options %></li>

  <% end %>

</ul>
